//Fire Truck Pattern #1 using red and green LEDS

#include <msp430fr6989.h>
#include <stdint.h>

#define redLED BIT0 // Red LED at P1.0
#define greenLED BIT7 //green LED at P9.7

void main(void) {
    volatile uint32_t i;
    volatile uint32_t j;
    volatile uint8_t k;
    volatile uint8_t flashes;

    WDTCTL = WDTPW | WDTHOLD; // Stop the Watchdog timer
    PM5CTL0 &= ~LOCKLPM5; // Disable GPIO power-on default high-impedance mode

    P1DIR |= redLED; // Direct pin as output
    P1OUT &= ~redLED; // Turn LED Off

    P9DIR |= greenLED;
    P9OUT &= ~greenLED;

    i = 20000;
    for(;;) {

        //controls number of flashes
        flashes = (i <= 6500) ? 10 : 20;

        //flash red LED
        for(k=0; k<flashes; k++){
            P1OUT ^= redLED;
            _delay_cycles(40000);
        }

        for(j = i; j > 0; j--){}

        //updates delay value
        if (i > 2000) {
            i -= 4500;
            //4 iterations: 15500, 11000, 6500, 2000
        } else {
            i = 20000;
        }

        //flashes green LED
        for(k=0; k<flashes; k++){
            P9OUT ^= greenLED;
            _delay_cycles(40000);
        }

    }
}
